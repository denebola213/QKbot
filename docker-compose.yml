version: '2'

volumes:
  postgres-data:
    driver: 'local'

services:
  notify:
    build: notify
    volumes:
      - ./notify:/usr/src/qkbot/notify
    command: ruby /usr/src/qkbot/notify/notify.rb
  
  commandbot:
    build: commandbot
    volumes:
      - ./commandbot:/usr/src/qkbot/commandbot
    command: ruby /usr/src/qkbot/commandbot/bot.rb

  postgres:
    image: postgres:9.3
    volumes:
      - postgres-data:/var/lib/postgresql/data
    ports:
      - "15432:5432"
  